<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="index.php">{% trans %}Home{% endtrans %}</a></li>
        <li class="breadcrumb-item" aria-current="page">{% trans %}Change password{% endtrans %}</li>
    </ol>
</nav>

{% if message %}
<div class="alert alert-{{ message.type }}">{{ message.content }}</div>
{% endif %}

<div class="row">
    <div class="col-md-6">
        <div class="card shadow-sm mb-4">
            <div class="card-header py-3">
                <strong><i class="bi bi-key me-2"></i>{% trans %}Change Password{% endtrans %}</strong>
            </div>
            <div class="card-body">
                <form class="needs-validation" method="post" action="index.php?page=change_password" novalidate>
                    <input type="hidden" name="_token" value="{{ csrf_token }}">
                    
                    <div class="mb-3">
                        <label for="current_password" class="form-label">{% trans %}Current password{% endtrans %}</label>
                        <div class="input-group input-group-sm">
                            <input type="password" class="form-control form-control-sm" id="current_password" name="old_password" value="" required>
                            <button class="btn btn-sm btn-outline-secondary" type="button" onclick="showPassword('current_password', 'eye1')"><i class="bi bi-eye-fill text-secondary" id="eye1"></i></button>
                            <div class="invalid-feedback">{% trans %}Provide current password{% endtrans %}</div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="new_password" class="form-label">{% trans %}New password{% endtrans %}</label>
                        <div class="input-group input-group-sm">
                            <input type="password" class="form-control form-control-sm" id="new_password" name="new_password" value="" required>
                            <button class="btn btn-sm btn-outline-secondary" type="button" onclick="showPassword('new_password', 'eye2')"><i class="bi bi-eye-fill text-secondary" id="eye2"></i></button>
                            <div class="invalid-feedback">{% trans %}Provide new password{% endtrans %}</div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="repeat_password" class="form-label">{% trans %}Repeat password{% endtrans %}</label>
                        <div class="input-group input-group-sm">
                            <input type="password" class="form-control form-control-sm" id="repeat_password" name="new_password2" value="" required>
                            <button class="btn btn-sm btn-outline-secondary" type="button" onclick="showPassword('repeat_password', 'eye3')"><i class="bi bi-eye-fill text-secondary" id="eye3"></i></button>
                            <div class="invalid-feedback">{% trans %}Provide new password{% endtrans %}</div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between">
                        <div>
                            <button type="submit" class="btn btn-sm btn-primary">
                                <i class="bi bi-key-fill me-1 text-white"></i>{% trans %}Change password{% endtrans %}
                            </button>
                            <a href="index.php" class="btn btn-sm btn-secondary">
                                <i class="bi bi-x-circle me-1 text-white"></i>{% trans %}Cancel{% endtrans %}
                            </a>
                        </div>
                        <small class="text-muted align-self-end">{% trans %}All fields are required{% endtrans %}</small>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card shadow-sm mb-4">
            <div class="card-header py-3">
                <strong><i class="bi bi-info-circle me-2"></i>{% trans %}Password Guidelines{% endtrans %}</strong>
            </div>
            <div class="card-body p-0">
                <div class="list-group list-group-flush">
                    <div class="list-group-item border-bottom">
                        <div class="d-flex w-100 justify-content-between align-items-center">
                            <h6 class="mb-1"><i class="bi bi-check-circle text-primary me-2"></i>{% trans %}Requirements{% endtrans %}</h6>
                            {% if password_policy.enabled %}
                            <span class="badge bg-primary rounded-pill">{% trans %}Enforced{% endtrans %}</span>
                            {% endif %}
                        </div>
                        <ul class="mb-0 ps-4 small">
                            {% if password_policy.enabled %}
                            {% if password_policy.min_length %}
                            <li>{% trans %}Minimum length{% endtrans %}: {{ password_policy.min_length }} {% trans %}characters{% endtrans %}</li>
                            {% endif %}
                            {% if password_policy.require_uppercase %}
                            <li>{% trans %}Must contain uppercase letters{% endtrans %}</li>
                            {% endif %}
                            {% if password_policy.require_lowercase %}
                            <li>{% trans %}Must contain lowercase letters{% endtrans %}</li>
                            {% endif %}
                            {% if password_policy.require_numbers %}
                            <li>{% trans %}Must contain numbers{% endtrans %}</li>
                            {% endif %}
                            {% if password_policy.require_special %}
                            <li>
                                {% trans %}Must contain special characters{% endtrans %}
                                <span class="text-muted">({{ password_policy.special_characters }})</span>
                            </li>
                            {% endif %}
                            {% else %}
                            <li>{% trans %}No specific password requirements{% endtrans %}</li>
                            {% endif %}
                        </ul>
                    </div>
                    <div class="list-group-item">
                        <h6 class="mb-1"><i class="bi bi-shield-lock text-warning me-2"></i>{% trans %}Security Tips{% endtrans %}</h6>
                        <ul class="mb-0 ps-4 small">
                            <li>{% trans %}Use a unique password not used on other sites{% endtrans %}</li>
                            <li>{% trans %}Choose a password that is difficult to guess{% endtrans %}</li>
                            <li>{% trans %}Include a mix of letters, numbers, and symbols{% endtrans %}</li>
                            <li>{% trans %}Consider using a password manager{% endtrans %}</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
